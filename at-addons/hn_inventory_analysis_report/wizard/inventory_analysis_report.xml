<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="inventory_analysis_report_form_view" model="ir.ui.view">
            <field name="name">inventory.analysis.report.form.view</field>
            <field name="model">inventory.analysis.report</field>
            <field name="arch" type="xml">
                <form>
                    <field name="is_data_fetched" invisible="1"/>
                    <field name="company_ids" invisible="1"/>
                    <sheet>
                        <group name="filters" string="Filters">
                            <group string="Date Filters">
                                <field name="type"/>

                                <label for="year" string="Date Range" attrs="{'invisible' : [('type','=','custom')]}"/>
                                <div name="date_range_div" class="o_row" attrs="{'invisible' : [('type','=','custom')]}">
                                    <field name="year" attrs="{'required' : [('type','=',['annual','monthly'])]}" />
                                    <field name="month" attrs="{'required' : [('type','=','monthly')], 'invisible' : [('type','!=','monthly')]}" />
                                </div>

                                <field name="start_date" attrs="{'required' : [('type','=','custom')], 'invisible' : [('type','!=','custom')]}" />
                                <field name="end_date" attrs="{'required' : [('type','=','custom')], 'invisible' : [('type','!=','custom')]}" />

                            </group>

                            <group string="Product &amp; Category Filters">
                                <field name="product_brand_ids" widget="many2many_tags" options="{'no_create_edit': True}"/>
                                <field name="product_categ_ids" widget="many2many_tags" options="{'no_create_edit': True}"/>
                                <field name="product_ids" widget="many2many_tags" options="{'no_create_edit': True}"/>
                            </group>

                            <group string='Coverage Days'>
                                <field name="min_days"/>
                                <field name="max_days"/>
                                <field name="avg_weight_of_brand_container"/>
                            </group>

                            <group string='Sales Category &amp; Warehouses'>
                                <field name="scm_category"/>
                                <field name="warehouse_ids" widget="many2many_tags" options="{'no_create_edit': True}"/>
                            </group>
                        </group>

                        <notebook>
                            <page name="report_lines" string="Report Lines">
                                <field name="line_ids" widget="section_and_note_one2many" mode="tree,form" readonly="1">
                                    <tree string="Report Lines">
                                        <field name="sequence" widget="handle"/>
                                        <field name="product_id"/>
                                        <field name="total_stock"/>
                                        <field name="total_ads"/>
                                        <field name="totaL_total_sales"/>
                                        <field name="company_stamina"/>
                                        <field name="compute_totals" invisible="1"/>
                                        <field name="warehouse_line_ids"/>
                                        <field name="stage_line_ids"/>
                                    </tree>
                                    <form>
                                        <sheet>
                                            <field name="warehouse_line_ids" widget="section_and_note_one2many" mode="tree" readonly="1">
                                                <tree>
                                                    <field name="warehouse_id"/>
                                                    <field name="transit_stock"/>
                                                    <field name="onhand_quantity"/>
                                                    <field name="total_sales"/>
                                                    <field name="total_sales_qty"/>
                                                    <field name="avg_daily_sales"/>
                                                    <field name="stock_per_ads"/>
                                                    <field name="opening_stock"/>
                                                    <field name="inventory_phi"/>
                                                    <!-- <field name="forecasted_qty"/> -->
                                                    <field name="scm_category"/>
                                                    <field name="color_coding"/>
                                                </tree>
                                            </field>
                                            <field name="stage_line_ids" widget="section_and_note_one2many" mode="tree" readonly="1">
                                                <tree>
                                                    <field name="stage_id"/>
                                                    <field name="quantity"/>
                                                </tree>
                                            </field>
                                        </sheet>
                                    </form>
                                </field>
                            </page>
                        </notebook>
                    </sheet>
                    <footer>
                        <button name="get_report_data" string="Get Records" type="object" class="btn-primary" />
                        <button name="print_excel" string="Download Excel" type="object" class="btn-primary" attrs="{'invisible' : [('is_data_fetched','=',False)]}"/>
                        <button name="view_data" string="View Data" type="object" class="btn-primary" attrs="{'invisible' : [('is_data_fetched','=',False)]}"/>
                        <button string="Cancel" class="oe_link" special="cancel" />
                    </footer>
                </form>
            </field>
        </record>

        <record id="action_inventory_analysis_report" model="ir.actions.act_window">
            <field name="name">Inventory Analysis Report</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">inventory.analysis.report</field>
            <field name="view_mode">form</field>
            <!-- <field name="context">{"form_view_ref": "hn_inventory_analysis_report.sales_conversion_report_view"}</field> -->
            <field name="target">new</field>
            <field name="domain">[]</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face"> No Records to Show </p>
            </field>
        </record>

        <menuitem
            action="action_inventory_analysis_report"
            id="menu_inventory_analysis_report"
            name="Inventory Analysis Report"
            parent="stock.menu_warehouse_report"
            sequence="15"/>
    </data>
</odoo>